{% extends 'layout.html' %}

{% block title %}
RGT | Grid {{ grid.name }}
{% endblock %}

{% block stylesheet %}
<link rel="stylesheet" type="text/css" href="{{ STATIC_URL }}css/gridTableGeneralFunctions.css" />
<link rel="stylesheet" type="text/css" href="{{ STATIC_URL }}css/showMyGrids.css" />
<link rel="stylesheet" type="text/css" href="{{ STATIC_URL }}css/tipsy.css" />
<link rel="stylesheet" type="text/css" href="{{ STATIC_URL }}css/smallButton.css" />
<link rel="stylesheet" type="text/css" href="{{ STATIC_URL }}css/sliders.css" />
{% endblock stylesheet %}

{% block javascript %}
<script>
	if(typeof showMyGrid != 'function')
	{
		$.ajax({
			url: '{{ STATIC_URL }}js/showMyGrids.js',
			dataType: 'script',
			async: false
		});
	}
    $(document).ready(function() {
        if ($('#tabs').is(':hidden'))
        {
            $('#tabs').show();
        }
        $('.resim').remove();
        showGrid("{{ grid.usid }}", "{{ grid.name }}");
        $('#weightSliders').show();
        $('#wContainer').hide();
        $('#weightSliders2').hide();
    });
</script>
{% endblock javascript %}

{% block content %}
<div style="display:none">
    <input id="gridUSID" value="{{ grid.usid }}" />
    <input id="gridName" value="{{ grid.name }}" />
</div>

<h2>{{grid.name }}</h2>

<form id="form">{% csrf_token %}
	<div id="results">
        {{ tableHTML }}
	</div>
    <div id="wContainer" style="display: none;">
	</div>

    <p id="totalW"></p>
    <input type="button" id="weightSliders" onclick="adjustWeights();$('#weightSliders').hide();$('#weightSliders2').show();" value="Prioritize concerns" hidden="hidden"/><p id="weightSliders2" hidden="hidden">&nbsp;Please click save in order to go back.</p>
	<div class="tableOptions" id="showMyGridsTableOptions">
        <input type="button" id="saveButton" onclick="$('#results').show();$('#weightSliders').show();$('#totalW').hide();$('#wContainer').hide();$('#weightSliders2').hide();rescale($('#form'));$('#similarityMatrix').hide();$('.resim').remove();clearSvgImg('dendogramDiv');saveGrid();" value="Save" />
        <input type="button" onclick="$('.resim').remove();deleteMyGrid()" value="Delete" />
        <input type="button" id="reloadSavedGridButton" onclick="showMyGrid(true)" value="Undo all" />
	</div>
    <div id="tabs" hidden="hidden">
        <ul>
            <li><a href="#similarityMatrix" onclick="$('.resim').remove();$('#similarityMatrix').show();getMatrices()">Similarity analysis</a></li>
            <li><a href="#showDendrogram" onclick="$('.resim').remove();$('#showDendogram').show();getDendogram()" >Cluster analysis</a></li>
            <li><a href="#pca" onclick="getPCA()">Principal component analysis (alpha)</a></li>
        </ul>
        <div id="similarityMatrix">
            <div id="similarity" style="display: none;">
	            <div id="similarityDiv" class="similarityDiv">
	            </div>
            </div>
        </div>
        <div id="showDendrogram">
             <div id="dendrogram" style="display: none;">
	                <div id="dendrogramHead" class="dendrogramHead">
                    <span id="dendrogramTitle" class="dendrogramTitle"></span>
	                </div>
	                <div id="dendogramDiv" class="dendrogramDiv">
	                </div>
            </div>
        </div>
        <div id="pca">
            <div id="pcaResult" align="center">
            </div>
        </div>
    </div>
</form>
{% endblock %}